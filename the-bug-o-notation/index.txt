1:HL["/_next/static/css/0f6647b39fdbcb3d.css","style",{"crossOrigin":""}]
0:["iWWiOWlg3tDiHen4DuUO-",[[["",{"children":[["slug","the-bug-o-notation","d"],{"children":["__PAGE__?{\"slug\":\"the-bug-o-notation\"}",{}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0f6647b39fdbcb3d.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/3c6c21fa7f32edf2.css","style",{"crossOrigin":""}]
5:HL["/_next/static/css/f9d4d708579596e8.css","style",{"crossOrigin":""}]
6:I[4982,["569","static/chunks/569-52e5d813bbfa85ea.js","185","static/chunks/app/layout-cfb37acb14684668.js"],""]
7:I[8256,["569","static/chunks/569-52e5d813bbfa85ea.js","64","static/chunks/app/%5Bslug%5D/layout-d3e08fbfdc858bf2.js"],""]
8:I[2008,["569","static/chunks/569-52e5d813bbfa85ea.js","42","static/chunks/app/%5Bslug%5D/page-798073576b23f3f1.js"],""]
9:I[6954,[],""]
a:I[7264,[],""]
2:[null,["$","$L6",null,{"children":["$","html",null,{"lang":"en","className":"__className_e34cb4","children":["$","body",null,{"className":"mx-auto max-w-2xl bg-[--bg] px-5 py-12 text-[--text]","children":[["$","header",null,{"className":"mb-14 flex flex-row place-content-between","children":[["$","$L7",null,{}],["$","span",null,{"className":"relative top-[4px] italic","children":["by"," ",["$","$L8",null,{"href":"https://danabra.mov","target":"_blank","children":["$","img",null,{"alt":"Dan Abramov","src":"https://github.com/gaearon.png","className":"relative -top-1 mx-1 inline h-8 w-8 rounded-full"}]}]]}]]}],["$","main",null,{"children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","article",null,{"className":"markdown","children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"Not found"}],["$","div",null,{"className":"markdown mt-10","children":[["$","p",null,{"children":"This page doesn't exist (yet?)"}],["$","p",null,{"children":["I recently rewrote the site so maybe something broke. Please"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/issues/796","children":"complain here."}]]}],["$","p",null,{"children":["If you're looking for translated posts, they're not on the site anymore but you can find"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/tree/archive/src/pages","children":"an archive of them here."}]]}],["$","p",null,{"children":"Hope you'll find what you're looking for."}]]}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]],"childProp":{"current":[null,[["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children",["slug","the-bug-o-notation","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb","$Lc",null],"segment":"__PAGE__?{\"slug\":\"the-bug-o-notation\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]]}],["$","footer",null,{"className":"mt-12","children":["$","$L7",null,{}]}]],null],"segment":["slug","the-bug-o-notation","d"]},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3c6c21fa7f32edf2.css","precedence":"next","crossOrigin":""}]]}]}]]}]}]}],null]
c:["$","article",null,{"children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"The ‚ÄúBug-O‚Äù Notation"}],["$","p",null,{"className":"mt-2 text-[13px] text-gray-700 dark:text-gray-300","children":"January 25, 2019"}],["$","div",null,{"className":"markdown mt-10","children":["$Ld",["$","hr",null,{}],["$","p",null,{"children":[["$","$L8",null,{"href":"https://x.com/search?q=https%3A%2F%2Foverreacted.io%2Fthe-bug-o-notation%2F","children":"Discuss on ùïè"}],"¬†¬†¬∑¬†¬†",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/edit/main/public/the-bug-o-notation/index.md","children":"Edit on GitHub"}]]}]]}]]}]
3:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"The ‚ÄúBug-O‚Äù Notation ‚Äî overreacted"}],["$","meta","3",{"name":"description","content":"What is the üêû(n) of your API?"}],["$","link","4",{"rel":"icon","href":"/icon.png?e0852c1e2c7f0e65","type":"image/png","sizes":"329x329"}]]
b:null
d:[["$","p",null,{"children":["When you write performance-sensitive code, it‚Äôs a good idea to keep in mind its algorithmic complexity. It is often expressed with the ",["$","$L8",null,{"href":"https://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/","children":"Big-O notation"}],"."]}],"\n",["$","p",null,{"children":["Big-O is a measure of ",["$","strong",null,{"children":"how much slower the code will get as you throw more data at it"}],". For example, if a sorting algorithm has O(",["$","i",null,{"children":["n",["$","sup",null,{"children":"2"}]]}],") complexity, sorting √ó50 times more items will be roughly 50",["$","sup",null,{"children":"2"}]," = 2,500 times slower. Big O doesn‚Äôt give you an exact number, but it helps you understand how an algorithm ",["$","em",null,{"children":"scales"}],"."]}],"\n",["$","p",null,{"children":["Some examples: O(",["$","i",null,{"children":"n"}],"), O(",["$","i",null,{"children":"n"}]," log ",["$","i",null,{"children":"n"}],"), O(",["$","i",null,{"children":["n",["$","sup",null,{"children":"2"}]]}],"), O(",["$","i",null,{"children":"n!"}],")."]}],"\n",["$","p",null,{"children":["However, ",["$","strong",null,{"children":"this post isn‚Äôt about algorithms or performance"}],". It‚Äôs about APIs and debugging. It turns out, API design involves very similar considerations."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"A significant part of our time goes into finding and fixing mistakes in our code. Most developers would like to find bugs faster. As satisfactory as it may be in the end, it sucks to spend the whole day chasing a single bug when you could have implemented something from your roadmap."}],"\n",["$","p",null,{"children":["Debugging experience influences our choice of abstractions, libraries, and tools. Some API and language designs make a whole class of mistakes impossible. Some create endless problems. ",["$","strong",null,{"children":"But how can you tell which one is which?"}]]}],"\n",["$","p",null,{"children":["Many online discussions about APIs are primarily concerned with aesthetics. But that ",["$","$L8",null,{"href":"/optimized-for-change/","children":"doesn‚Äôt say much"}]," about what it feels like to use an API in practice."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["I have a metric that helps me think about this. I call it the ",["$","em",null,{"children":"Bug-O"}]," notation:"]}]}],"\n",["$","p",null,{"children":["$","font",null,{"size":"40","children":["üêû(",["$","i",null,{"children":"n"}],")"]}]}],"\n",["$","p",null,{"children":["The Big-O describes how much an algorithm slows down as the inputs grow. The ",["$","em",null,{"children":"Bug-O"}]," describes how much an API slows ",["$","em",null,{"children":"you"}]," down as your codebase grows."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["For example, consider this code that manually updates the DOM over time with imperative operations like ",["$","code",null,{"children":"node.appendChild()"}]," and ",["$","code",null,{"children":"node.removeChild()"}]," and no clear structure:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"trySubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Section 1"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"spinner"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createSpinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"spinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"submitForm"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"then"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  \t"}],["$","span",null,{"style":{"color":"#637777"},"children":"// Section 2"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"spinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"successMessage"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createSuccessMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"successMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"catch"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  \t"}],["$","span",null,{"style":{"color":"#637777"},"children":"// Section 3"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"spinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"errorMessage"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createErrorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createRetryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"errorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"addEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"click"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Section 4"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"errorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"trySubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["The problem with this code isn‚Äôt that it‚Äôs ‚Äúugly‚Äù. We‚Äôre not talking about aesthetics. ",["$","strong",null,{"children":"The problem is that if there is a bug in this code, I don‚Äôt know where to start looking."}]]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"Depending on the order in which the callbacks and events fire, there is a combinatorial explosion of the number of codepaths this program could take."}]," In some of them, I‚Äôll see the right messages. In others, I‚Äôll see multiple spinners, failure and error messages together, and possibly crashes."]}],"\n",["$","p",null,{"children":["This function has 4 different sections and no guarantees about their ordering. My very non-scientific calculation tells me there are 4√ó3√ó2√ó1 = 24 different orders in which they could run. If I add four more code segments, it‚Äôll be 8√ó7√ó6√ó5√ó4√ó3√ó2√ó1 ‚Äî ",["$","em",null,{"children":"forty thousand"}]," combinations. Good luck debugging that."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["In other words, the Bug-O of this approach is üêû(",["$","i",null,{"children":"n!"}],")"]}]," where ",["$","em",null,{"children":"n"}]," is the number of code segments touching the DOM. Yeah, that‚Äôs a ",["$","em",null,{"children":"factorial"}],". Of course, I‚Äôm not being very scientific here. Not all transitions are possible in practice. But on the other hand, each of these segments can run more than once. ",["$","span",null,{"style":{"wordBreak":"keep-all"},"children":["üêû(",["$","em",null,{"children":"¬Ø\\_(„ÉÑ)_/¬Ø"}],")"]}]," might be more accurate but it‚Äôs still pretty bad. We can do better."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"To improve the Bug-O of this code, we can limit the number of possible states and outcomes. We don‚Äôt need any library to do this. It‚Äôs just a matter of enforcing some structure on our code. Here is one way we could do it:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"currentState"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"initial"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 'initial' | 'pending' | 'success' | 'error'"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"};"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"trySubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"currentState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"==="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Don't allow to submit twice"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"submitForm"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"then"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"success"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"catch"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" error "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"nextState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Clear all existing children"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"innerHTML "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"''"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  currentState "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" nextState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"switch"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"nextState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"initial"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"spinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"success"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"successMessage"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createSuccessMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"successMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"errorMessage"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createErrorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"nextState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"createRetryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"errorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"appendChild"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"retryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"addEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"click"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" trySubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["This code might not look too different. It‚Äôs even a bit more verbose. But it is ",["$","em",null,{"children":"dramatically"}]," simpler to debug because of this line:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"nextState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Clear all existing children"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"formStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"innerHTML "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"''"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ... the code adding stuff to formStatus ..."}]]}]]}]}]}],"\n",["$","p",null,{"children":["By clearing out the form status before doing any manipulations, we ensure that our DOM operations always start from scratch. This is how we can fight the inevitable ",["$","$L8",null,{"href":"/the-elements-of-ui-engineering/","children":"entropy"}]," ‚Äî by ",["$","em",null,{"children":"not"}]," letting the mistakes accumulate. This is the coding equivalent of ‚Äúturning it off and on again‚Äù, and it works amazingly well."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["If there is a bug in the output, we only need to think ",["$","em",null,{"children":"one"}]," step back ‚Äî to the previous ",["$","code",null,{"children":"setState"}]," call."]}]," The Bug-O of debugging a rendering result is üêû(",["$","em",null,{"children":"n"}],") where ",["$","em",null,{"children":"n"}]," is the number of rendering code paths. Here, it‚Äôs just four (because we have four cases in a ",["$","code",null,{"children":"switch"}],")."]}],"\n",["$","p",null,{"children":["We might still have race conditions in ",["$","em",null,{"children":"setting"}]," the state, but debugging those is easier because each intermediate state can be logged and inspected. We can also disallow any undesired transitions explicitly:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"trySubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"currentState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"==="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Don't allow to submit twice"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}]]}]}]}],"\n",["$","p",null,{"children":"Of course, always resetting the DOM comes with a tradeoff. Na√Øvely removing and recreating the DOM every time would destroy its internal state, lose focus, and cause terrible performance problems in larger applications."}],"\n",["$","p",null,{"children":["That‚Äôs why libraries like React can be helpful. They let you ",["$","em",null,{"children":"think"}]," in the paradigm of always recreating the UI from scratch without necessarily doing it:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"FormStatus"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setState"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"    "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"initial"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handleSubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"preventDefault"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"==="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Don't allow to submit twice"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"submitForm"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"then"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"success"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"catch"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" error "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"content"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"switch"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"step"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"pending"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      content "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Spinner"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" />;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"success"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      content "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"SuccessMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" />;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"case"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"content"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"ErrorMessage"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" error={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} />"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"RetryButton"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" onClick={"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleSubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} />"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"break"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"form"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" onSubmit={"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleSubmit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"content"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"form"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["The code may look different, but the principle is the same. The component abstraction enforces boundaries so that you know no ",["$","em",null,{"children":"other"}]," code on the page could mess with its DOM or state. Componentization helps reduce the Bug-O."]}],"\n",["$","p",null,{"children":["In fact, if ",["$","em",null,{"children":"any"}]," value looks wrong in the DOM of a React app, you can trace where it comes from by looking at the code of components above it in the React tree one by one. No matter the app size, tracing a rendered value is üêû(",["$","em",null,{"children":"tree height"}],")."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["Next time you see an API discussion, consider: what is the üêû(",["$","em",null,{"children":"n"}],") of common debugging tasks in it?"]}]," What about existing APIs and principles you‚Äôre deeply familiar with? Redux, CSS, inheritance ‚Äî they all have their own Bug-O."]}]]
