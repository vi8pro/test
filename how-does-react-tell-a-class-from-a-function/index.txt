1:HL["/_next/static/css/0f6647b39fdbcb3d.css","style",{"crossOrigin":""}]
0:["iWWiOWlg3tDiHen4DuUO-",[[["",{"children":[["slug","how-does-react-tell-a-class-from-a-function","d"],{"children":["__PAGE__?{\"slug\":\"how-does-react-tell-a-class-from-a-function\"}",{}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0f6647b39fdbcb3d.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/3c6c21fa7f32edf2.css","style",{"crossOrigin":""}]
5:HL["/_next/static/css/f9d4d708579596e8.css","style",{"crossOrigin":""}]
6:I[4982,["569","static/chunks/569-52e5d813bbfa85ea.js","185","static/chunks/app/layout-cfb37acb14684668.js"],""]
7:I[8256,["569","static/chunks/569-52e5d813bbfa85ea.js","64","static/chunks/app/%5Bslug%5D/layout-d3e08fbfdc858bf2.js"],""]
8:I[2008,["569","static/chunks/569-52e5d813bbfa85ea.js","42","static/chunks/app/%5Bslug%5D/page-798073576b23f3f1.js"],""]
9:I[6954,[],""]
a:I[7264,[],""]
2:[null,["$","$L6",null,{"children":["$","html",null,{"lang":"en","className":"__className_e34cb4","children":["$","body",null,{"className":"mx-auto max-w-2xl bg-[--bg] px-5 py-12 text-[--text]","children":[["$","header",null,{"className":"mb-14 flex flex-row place-content-between","children":[["$","$L7",null,{}],["$","span",null,{"className":"relative top-[4px] italic","children":["by"," ",["$","$L8",null,{"href":"https://danabra.mov","target":"_blank","children":["$","img",null,{"alt":"Dan Abramov","src":"https://github.com/gaearon.png","className":"relative -top-1 mx-1 inline h-8 w-8 rounded-full"}]}]]}]]}],["$","main",null,{"children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","article",null,{"className":"markdown","children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"Not found"}],["$","div",null,{"className":"markdown mt-10","children":[["$","p",null,{"children":"This page doesn't exist (yet?)"}],["$","p",null,{"children":["I recently rewrote the site so maybe something broke. Please"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/issues/796","children":"complain here."}]]}],["$","p",null,{"children":["If you're looking for translated posts, they're not on the site anymore but you can find"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/tree/archive/src/pages","children":"an archive of them here."}]]}],["$","p",null,{"children":"Hope you'll find what you're looking for."}]]}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]],"childProp":{"current":[null,[["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children",["slug","how-does-react-tell-a-class-from-a-function","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb","$Lc",null],"segment":"__PAGE__?{\"slug\":\"how-does-react-tell-a-class-from-a-function\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]]}],["$","footer",null,{"className":"mt-12","children":["$","$L7",null,{}]}]],null],"segment":["slug","how-does-react-tell-a-class-from-a-function","d"]},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3c6c21fa7f32edf2.css","precedence":"next","crossOrigin":""}]]}]}]]}]}]}],null]
c:["$","article",null,{"children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"How Does React Tell a Class from a Function?"}],["$","p",null,{"className":"mt-2 text-[13px] text-gray-700 dark:text-gray-300","children":"December 2, 2018"}],["$","div",null,{"className":"markdown mt-10","children":["$Ld",["$","hr",null,{}],["$","p",null,{"children":[["$","$L8",null,{"href":"https://x.com/search?q=https%3A%2F%2Foverreacted.io%2Fhow-does-react-tell-a-class-from-a-function%2F","children":"Discuss on ùïè"}],"¬†¬†¬∑¬†¬†",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/edit/main/public/how-does-react-tell-a-class-from-a-function/index.md","children":"Edit on GitHub"}]]}]]}]]}]
3:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"How Does React Tell a Class from a Function? ‚Äî overreacted"}],["$","meta","3",{"name":"description","content":"We talk about classes, new, instanceof, prototype chains, and API design."}],["$","link","4",{"rel":"icon","href":"/icon.png?e0852c1e2c7f0e65","type":"image/png","sizes":"329x329"}]]
b:null
d:[["$","p",null,{"children":["Consider this ",["$","code",null,{"children":"Greeting"}]," component which is defined as a function:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":"React also supports defining it as a class:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["(Until ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-intro.html","children":"recently"}],", that was the only way to use features like state.)"]}],"\n",["$","p",null,{"children":["When you want to render a ",["$","code",null,{"children":"<Greeting />"}],", you don‚Äôt care how it‚Äôs defined:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Class or function ‚Äî whatever."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" />"}]]}]]}]}]}],"\n",["$","p",null,{"children":["But ",["$","em",null,{"children":"React itself"}]," cares about the difference!"]}],"\n",["$","p",null,{"children":["If ",["$","code",null,{"children":"Greeting"}]," is a function, React needs to call it:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Your code"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Inside React"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"result"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// <p>Hello</p>"}]]}]]}]}]}],"\n",["$","p",null,{"children":["But if ",["$","code",null,{"children":"Greeting"}]," is a class, React needs to instantiate it with the ",["$","code",null,{"children":"new"}]," operator and ",["$","em",null,{"children":"then"}]," call the ",["$","code",null,{"children":"render"}]," method on the just created instance:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Your code"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Inside React"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"instance"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Greeting {}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"result"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" instance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// <p>Hello</p>"}]]}]]}]}]}],"\n",["$","p",null,{"children":["In both cases React‚Äôs goal is to get the rendered node (in this example, ",["$","code",null,{"children":"<p>Hello</p>"}],"). But the exact steps depend on how ",["$","code",null,{"children":"Greeting"}]," is defined."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"So how does React know if something is a class or a function?"}]}],"\n",["$","p",null,{"children":["Just like in my ",["$","$L8",null,{"href":"/why-do-we-write-super-props/","children":"previous post"}],", ",["$","strong",null,{"children":["you don‚Äôt ",["$","em",null,{"children":"need"}]," to know this to be productive in React."]}]," I didn‚Äôt know this for years. Please don‚Äôt turn this into an interview question. In fact, this post is more about JavaScript than it is about React."]}],"\n",["$","p",null,{"children":["This blog is for a curious reader who wants to know ",["$","em",null,{"children":"why"}]," React works in a certain way. Are you that person? Then let‚Äôs dig in together."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["This is a long journey. Buckle up. This post doesn‚Äôt have much information about React itself, but we‚Äôll go through some aspects of ",["$","code",null,{"children":"new"}],", ",["$","code",null,{"children":"this"}],", ",["$","code",null,{"children":"class"}],", arrow functions, ",["$","code",null,{"children":"prototype"}],", ",["$","code",null,{"children":"__proto__"}],", ",["$","code",null,{"children":"instanceof"}],", and how those things work together in JavaScript. Luckily, you don‚Äôt need to think about those as much when you ",["$","em",null,{"children":"use"}]," React. If you‚Äôre implementing React though‚Ä¶"]}]}],"\n",["$","p",null,{"children":"(If you really just want to know the answer, scroll to the very end.)"}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["First, we need to understand why it‚Äôs important to treat functions and classes differently. Note how we use the ",["$","code",null,{"children":"new"}]," operator when calling a class:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// If Greeting is a function"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"result"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// <p>Hello</p>"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// If Greeting is a class"}]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"instance"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Greeting {}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"result"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" instance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// <p>Hello</p>"}]]}]]}]}]}],"\n",["$","p",null,{"children":["Let‚Äôs get a rough sense of what the ",["$","code",null,{"children":"new"}]," operator does in JavaScript."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["In the old days, JavaScript did not have classes. However, you could express a similar pattern to classes using plain functions. ",["$","strong",null,{"children":["Concretely, you can use ",["$","em",null,{"children":"any"}]," function in a role similar to a class constructor by adding ",["$","code",null,{"children":"new"}]," before its call:"]}]]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Just a function"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ Person {name: 'Fred'}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"george"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"George"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ Won‚Äôt work"}]]}]]}]}]}],"\n",["$","p",null,{"children":"You can still write code like this today! Try it in DevTools."}],"\n",["$","p",null,{"children":["If you called ",["$","code",null,{"children":"Person('Fred')"}]," ",["$","strong",null,{"children":"without"}]," ",["$","code",null,{"children":"new"}],", ",["$","code",null,{"children":"this"}]," inside it would point to something global and useless (for example, ",["$","code",null,{"children":"window"}]," or ",["$","code",null,{"children":"undefined"}],"). So our code would crash or do something silly like setting ",["$","code",null,{"children":"window.name"}],"."]}],"\n",["$","p",null,{"children":["By adding ",["$","code",null,{"children":"new"}]," before the call, we say: ‚ÄúHey JavaScript, I know ",["$","code",null,{"children":"Person"}]," is just a function but let‚Äôs pretend it‚Äôs something like a class constructor. ",["$","strong",null,{"children":["Create an ",["$","code",null,{"children":"{}"}]," object and point ",["$","code",null,{"children":"this"}]," inside the ",["$","code",null,{"children":"Person"}]," function to that object so I can assign stuff like ",["$","code",null,{"children":"this.name"}],". Then give that object back to me."]}],"‚Äù"]}],"\n",["$","p",null,{"children":["That‚Äôs what the ",["$","code",null,{"children":"new"}]," operator does."]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Same object as `this` inside `Person`"}]]}]}]}]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"new"}]," operator also makes anything we put on ",["$","code",null,{"children":"Person.prototype"}]," available on the ",["$","code",null,{"children":"fred"}]," object:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"alert"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Hi, I am "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}]]}]}]}],"\n",["$","p",null,{"children":"This is how people emulated classes before JavaScript added them directly."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["So ",["$","code",null,{"children":"new"}]," has been around in JavaScript for a while. However, classes are more recent. They let us rewrite the code above to match our intent more closely:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Person"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"constructor"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"alert"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Hi, I am "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}]]}]}]}],"\n",["$","p",null,{"children":[["$","em",null,{"children":"Capturing developer‚Äôs intent"}]," is important in language and API design."]}],"\n",["$","p",null,{"children":["If you write a function, JavaScript can‚Äôt guess if it‚Äôs meant to be called like ",["$","code",null,{"children":"alert()"}]," or if it serves as a constructor like ",["$","code",null,{"children":"new Person()"}],". Forgetting to specify ",["$","code",null,{"children":"new"}]," for a function like ",["$","code",null,{"children":"Person"}]," would lead to confusing behavior."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"Class syntax lets us say: ‚ÄúThis isn‚Äôt just a function ‚Äî it‚Äôs a class and it has a constructor‚Äù."}]," If you forget ",["$","code",null,{"children":"new"}]," when calling it, JavaScript will raise an error:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ  If Person is a function: works fine"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ  If Person is a class: works fine too"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"george"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"George"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// We forgot `new`"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// üò≥ If Person is a constructor-like function: confusing behavior"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ If Person is a class: fails immediately"}]}]]}]}]}],"\n",["$","p",null,{"children":["This helps us catch mistakes early instead of waiting for some obscure bug like ",["$","code",null,{"children":"this.name"}]," being treated as ",["$","code",null,{"children":"window.name"}]," instead of ",["$","code",null,{"children":"george.name"}],"."]}],"\n",["$","p",null,{"children":["However, it means that React needs to put ",["$","code",null,{"children":"new"}]," before calling any class. It can‚Äôt just call it as a regular function, as JavaScript would treat it as an error!"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Counter"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ React can't just do this:"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"instance"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":"This spells trouble."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"Before we see how React solves this, it‚Äôs important to remember most people using React use compilers like Babel to compile away modern features like classes for older browsers. So we need to consider compilers in our design."}],"\n",["$","p",null,{"children":["In early versions of Babel, classes could be called without ",["$","code",null,{"children":"new"}],". However, this was fixed ‚Äî by generating some extra code:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// A bit simplified from Babel output:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(!("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"))"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"throw"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"TypeError"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Cannot call a class as a function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"\""}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Our code:"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ Okay"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"George"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"   "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ Cannot call a class as a function"}]]}]]}]}]}],"\n",["$","p",null,{"children":["You might have seen code like this in your bundle. That‚Äôs what all those ",["$","code",null,{"children":"_classCallCheck"}]," functions do. (You can reduce the bundle size by opting into the ‚Äúloose mode‚Äù with no checks but this might complicate your eventual transition to real native classes.)"]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["By now, you should roughly understand the difference between calling something with ",["$","code",null,{"children":"new"}]," or without ",["$","code",null,{"children":"new"}],":"]}],"\n",["$","p",null,{"children":["|  | ",["$","code",null,{"children":"new Person()"}]," | ",["$","code",null,{"children":"Person()"}]," |\r\n|---|---|---|\r\n| ",["$","code",null,{"children":"class"}]," | ‚úÖ ",["$","code",null,{"children":"this"}]," is a ",["$","code",null,{"children":"Person"}]," instance | üî¥ ",["$","code",null,{"children":"TypeError"}],"\r\n| ",["$","code",null,{"children":"function"}]," | ‚úÖ ",["$","code",null,{"children":"this"}]," is a ",["$","code",null,{"children":"Person"}]," instance | üò≥ ",["$","code",null,{"children":"this"}]," is ",["$","code",null,{"children":"window"}]," or ",["$","code",null,{"children":"undefined"}]," |"]}],"\n",["$","p",null,{"children":["This is why it‚Äôs important for React to call your component correctly. ",["$","strong",null,{"children":["If your component is defined as a class, React needs to use ",["$","code",null,{"children":"new"}]," when calling it."]}]]}],"\n",["$","p",null,{"children":"So can React just check if something is a class or not?"}],"\n",["$","p",null,{"children":["Not so easy! Even if we could ",["$","$L8",null,{"href":"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function","children":"tell a class from a function in JavaScript"}],", this still wouldn‚Äôt work for classes processed by tools like Babel. To the browser, they‚Äôre just plain functions. Tough luck for React."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["Okay, so maybe React could just use ",["$","code",null,{"children":"new"}]," on every call? Unfortunately, that doesn‚Äôt always work either."]}],"\n",["$","p",null,{"children":["With regular functions, calling them with ",["$","code",null,{"children":"new"}]," would give them an object instance as ",["$","code",null,{"children":"this"}],". It‚Äôs desirable for functions written as constructor (like our ",["$","code",null,{"children":"Person"}]," above), but it would be confusing for function components:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// We wouldn‚Äôt expect `this` to be any kind of instance here"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["That could be tolerable though. There are two ",["$","em",null,{"children":"other"}]," reasons that kill this idea."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["The first reason why always using ",["$","code",null,{"children":"new"}]," wouldn‚Äôt work is that for native arrow functions (not the ones compiled by Babel), calling with ",["$","code",null,{"children":"new"}]," throws an error:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" => "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ Greeting is not a constructor"}]]}]]}]}]}],"\n",["$","p",null,{"children":["This behavior is intentional and follows from the design of arrow functions. One of the main perks of arrow functions is that they ",["$","em",null,{"children":"don‚Äôt"}]," have their own ",["$","code",null,{"children":"this"}]," value ‚Äî instead, ",["$","code",null,{"children":"this"}]," is resolved from the closest regular function:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Friends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"friends"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"friends"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"friends"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"map"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"friend "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Friend"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"        "}],["$","span",null,{"style":{"color":"#637777"},"children":"// `this` is resolved from the `render` method"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"        size={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"props"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"size"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"        name={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"friend"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"        key={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"friend"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"      />"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["Okay, so ",["$","strong",null,{"children":["arrow functions don‚Äôt have their own ",["$","code",null,{"children":"this"}],"."]}]," But that means they would be entirely useless as constructors!"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" => "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üî¥ This wouldn‚Äôt make sense!"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["Therefore, ",["$","strong",null,{"children":["JavaScript disallows calling an arrow function with ",["$","code",null,{"children":"new"}],"."]}]," If you do it, you probably made a mistake anyway, and it‚Äôs best to tell you early. This is similar to how JavaScript doesn‚Äôt let you call a class ",["$","em",null,{"children":"without"}]," ",["$","code",null,{"children":"new"}],"."]}],"\n",["$","p",null,{"children":["This is nice but it also foils our plan. React can‚Äôt just call ",["$","code",null,{"children":"new"}]," on everything because it would break arrow functions! We could try detecting arrow functions specifically by their lack of ",["$","code",null,{"children":"prototype"}],", and not ",["$","code",null,{"children":"new"}]," just them:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{})."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// undefined"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{})."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// {constructor: f}"}]]}]]}]}]}],"\n",["$","p",null,{"children":["But this ",["$","$L8",null,{"href":"https://github.com/facebook/react/issues/4599#issuecomment-136562930","children":"wouldn‚Äôt work"}]," for functions compiled with Babel. This might not be a big deal, but there is another reason that makes this approach a dead end."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["Another reason we can‚Äôt always use ",["$","code",null,{"children":"new"}]," is that it would preclude React from supporting components that return strings or other primitive types."]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ 'Hello'"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üò≥ Greeting¬†{}"}]]}]]}]}]}],"\n",["$","p",null,{"children":["This, again, has to do with the quirks of the ",["$","$L8",null,{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new","children":[["$","code",null,{"children":"new"}]," operator"]}]," design. As we saw earlier, ",["$","code",null,{"children":"new"}]," tells the JavaScript engine to create an object, make that object ",["$","code",null,{"children":"this"}]," inside the function, and later give us that object as a result of ",["$","code",null,{"children":"new"}],"."]}],"\n",["$","p",null,{"children":["However, JavaScript also allows a function called with ",["$","code",null,{"children":"new"}]," to ",["$","em",null,{"children":"override"}]," the return value of ",["$","code",null,{"children":"new"}]," by returning some other object. Presumably, this was considered useful for patterns like pooling where we want to reuse instances:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","data-highlighted-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Created lazily"}]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"zeroVector"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Vector"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"x"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" y"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"x "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"==="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"&&"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" y "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"==="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"zeroVector "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"!=="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Reuse the same instance"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" zeroVector"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    zeroVector "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"x "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" x"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"y "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" y"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"a"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Vector"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"b"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Vector"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"c"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Vector"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üò≤ b === c"}]]}]]}]}]}],"\n",["$","p",null,{"children":["However, ",["$","code",null,{"children":"new"}]," also ",["$","em",null,{"children":"completely ignores"}]," a function‚Äôs return value if it‚Äôs ",["$","em",null,{"children":"not"}]," an object. If you return a string or a number, it‚Äôs like there was no ",["$","code",null,{"children":"return"}]," at all."]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Answer"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"42"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Answer"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ 42"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Answer"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üò≥ Answer {}"}]]}]]}]}]}],"\n",["$","p",null,{"children":["There is just no way to read a primitive return value (like a number or a string) from a function when calling it with ",["$","code",null,{"children":"new"}],". So if React always used ",["$","code",null,{"children":"new"}],", it would be unable to add support components that return strings!"]}],"\n",["$","p",null,{"children":"That‚Äôs unacceptable so we need to compromise."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["What did we learn so far? React needs to call classes (including Babel output) ",["$","em",null,{"children":"with"}]," ",["$","code",null,{"children":"new"}]," but it needs to call regular functions or arrow functions (including Babel output) ",["$","em",null,{"children":"without"}]," ",["$","code",null,{"children":"new"}],". And there is no reliable way to distinguish them."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"If we can‚Äôt solve a general problem, can we solve a more specific one?"}]}],"\n",["$","p",null,{"children":["When you define a component as a class, you‚Äôll likely want to extend ",["$","code",null,{"children":"React.Component"}]," for built-in methods like ",["$","code",null,{"children":"this.setState()"}],". ",["$","strong",null,{"children":["Rather than try to detect all classes, can we detect only ",["$","code",null,{"children":"React.Component"}]," descendants?"]}]]}],"\n",["$","p",null,{"children":"Spoiler: this is exactly what React does."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["Perhaps, the idiomatic way to check if ",["$","code",null,{"children":"Greeting"}]," is a React component class is by testing if ",["$","code",null,{"children":"Greeting.prototype instanceof React.Component"}],":"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"A"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"B"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" A "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"B"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"A"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// true"}]]}]]}]}]}],"\n",["$","p",null,{"children":"I know what you‚Äôre thinking. What just happened here?! To answer this, we need to understand JavaScript prototypes."}],"\n",["$","p",null,{"children":["You might be familiar with the ‚Äúprototype chain‚Äù. Every object in JavaScript might have a ‚Äúprototype‚Äù. When we write ",["$","code",null,{"children":"fred.sayHi()"}]," but ",["$","code",null,{"children":"fred"}]," object has no ",["$","code",null,{"children":"sayHi"}]," property, we look for ",["$","code",null,{"children":"sayHi"}]," property on ",["$","code",null,{"children":"fred"}],"‚Äôs prototype. If we don‚Äôt find it there, we look at the next prototype in the chain ‚Äî ",["$","code",null,{"children":"fred"}],"‚Äôs prototype‚Äôs prototype. And so on."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["Confusingly, the ",["$","code",null,{"children":"prototype"}]," property of a class or a function ",["$","em",null,{"children":"does not"}]," point to the prototype of that value."]}]," I‚Äôm not kidding."]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ü§™ Not Person's prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üò≥ Person's prototype"}]]}]]}]}]}],"\n",["$","p",null,{"children":["So the ‚Äúprototype chain‚Äù is more like ",["$","code",null,{"children":"__proto__.__proto__.__proto__"}]," than ",["$","code",null,{"children":"prototype.prototype.prototype"}],". This took me years to get."]}],"\n",["$","p",null,{"children":["What‚Äôs the ",["$","code",null,{"children":"prototype"}]," property on a function or a class, then? ",["$","strong",null,{"children":["It‚Äôs the ",["$","code",null,{"children":"__proto__"}]," given to all objects ",["$","code",null,{"children":"new"}],"ed with that class or a function!"]}]]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"alert"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Hi, I am "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"var "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"fred"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Person"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"Fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Sets `fred.__proto__` to `Person.prototype`"}]]}]]}]}]}],"\n",["$","p",null,{"children":["And that ",["$","code",null,{"children":"__proto__"}]," chain is how JavaScript looks up properties:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"sayHi"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 1. Does fred have a sayHi property? No."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 2. Does fred.__proto__ have a sayHi property? Yes. Call it!"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"fred"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"toString"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 1. Does fred have a toString property? No."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 2. Does fred.__proto__ have a toString property? No."}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 3. Does fred.__proto__.__proto__ have a toString property? Yes. Call it!"}]}]]}]}]}],"\n",["$","p",null,{"children":["In practice, you should almost never need to touch ",["$","code",null,{"children":"__proto__"}]," from the code directly unless you‚Äôre debugging something related to the prototype chain. If you want to make stuff available on ",["$","code",null,{"children":"fred.__proto__"}],", you‚Äôre supposed to put it on ",["$","code",null,{"children":"Person.prototype"}],". At least that‚Äôs how it was originally designed."]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"__proto__"}]," property wasn‚Äôt even supposed to be exposed by browsers at first because the prototype chain was considered an internal concept. But some browsers added ",["$","code",null,{"children":"__proto__"}]," and eventually it was begrudgingly standardized (but deprecated in favor of ",["$","code",null,{"children":"Object.getPrototypeOf()"}],")."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["And yet I still find it very confusing that a property called ",["$","code",null,{"children":"prototype"}]," does not give you a value‚Äôs prototype"]}]," (for example, ",["$","code",null,{"children":"fred.prototype"}]," is undefined because ",["$","code",null,{"children":"fred"}]," is not a function). Personally, I think this is the biggest reason even experienced developers tend to misunderstand JavaScript prototypes."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"This is a long post, eh? I‚Äôd say we‚Äôre 80% there. Hang on."}],"\n",["$","p",null,{"children":["We know that when we say ",["$","code",null,{"children":"obj.foo"}],", JavaScript actually looks for ",["$","code",null,{"children":"foo"}]," in ",["$","code",null,{"children":"obj"}],", ",["$","code",null,{"children":"obj.__proto__"}],", ",["$","code",null,{"children":"obj.__proto__.__proto__"}],", and so on."]}],"\n",["$","p",null,{"children":["With classes, you‚Äôre not exposed directly to this mechanism, but ",["$","code",null,{"children":"extends"}]," also works on top of the good old prototype chain. That‚Äôs how our React class instance gets access to methods like ",["$","code",null,{"children":"setState"}],":"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Hello"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"p"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"c"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Greeting.prototype"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// React.Component.prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"__proto__"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Object.prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Found on c.__proto__ (Greeting.prototype)"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Found on c.__proto__.__proto__ (React.Component.prototype)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"c"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"toString"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Found on c.__proto__.__proto__.__proto__ (Object.prototype)"}]]}]]}]}]}],"\n",["$","p",null,{"children":["In other words, ",["$","strong",null,{"children":["when you use classes, an instance‚Äôs ",["$","code",null,{"children":"__proto__"}]," chain ‚Äúmirrors‚Äù the class hierarchy:"]}]]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// `extends` chain"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#CED2D6"},"children":"Greeting"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  ‚Üí "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    ‚Üí "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Object"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"implicitly"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// `__proto__` chain"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  ‚Üí "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    ‚Üí "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      ‚Üí "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Object"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}]]}]]}]}]}],"\n",["$","p",null,{"children":"2 Chainz."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["Since the ",["$","code",null,{"children":"__proto__"}]," chain mirrors the class hierarchy, we can check whether a ",["$","code",null,{"children":"Greeting"}]," extends ",["$","code",null,{"children":"React.Component"}]," by starting with ",["$","code",null,{"children":"Greeting.prototype"}],", and then following down its ",["$","code",null,{"children":"__proto__"}]," chain:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// `__proto__` chain"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  ‚Üí "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// üïµÔ∏è We start here"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    ‚Üí "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ Found it!"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      ‚Üí "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Object"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}]]}]]}]}]}],"\n",["$","p",null,{"children":["Conveniently, ",["$","code",null,{"children":"x instanceof Y"}]," does exactly this kind of search. It follows the ",["$","code",null,{"children":"x.__proto__"}]," chain looking for ",["$","code",null,{"children":"Y.prototype"}]," there."]}],"\n",["$","p",null,{"children":"Normally, it‚Äôs used to determine whether something is an instance of a class:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"greeting"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"greeting "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// greeting (üïµÔ∏è‚Äç We start here)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//   .__proto__ ‚Üí Greeting.prototype (‚úÖ Found it!)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//     .__proto__ ‚Üí React.Component.prototype "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//       .__proto__ ‚Üí Object.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"greeting "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// greeting (üïµÔ∏è‚Äç We start here)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//   .__proto__ ‚Üí Greeting.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Found it!)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//       .__proto__ ‚Üí Object.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"greeting "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Object"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// true"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// greeting (üïµÔ∏è‚Äç We start here)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//   .__proto__ ‚Üí Greeting.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//     .__proto__ ‚Üí React.Component.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//       .__proto__ ‚Üí Object.prototype (‚úÖ Found it!)"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"greeting "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Banana"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// false"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// greeting (üïµÔ∏è‚Äç We start here)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//   .__proto__ ‚Üí Greeting.prototype"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//     .__proto__ ‚Üí React.Component.prototype "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//       .__proto__ ‚Üí Object.prototype (üôÖ‚Äç Did not find it!)"}]}]]}]}]}],"\n",["$","p",null,{"children":"But it would work just as fine to determine if a class extends another class:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"instanceof"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// greeting"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//   .__proto__ ‚Üí Greeting.prototype (üïµÔ∏è‚Äç We start here)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Found it!)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"//       .__proto__ ‚Üí Object.prototype"}]}]]}]}]}],"\n",["$","p",null,{"children":"And that check is how we could determine if something is a React component class or a regular function."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"That‚Äôs not what React does though. üò≥"}],"\n",["$","p",null,{"children":["One caveat to the ",["$","code",null,{"children":"instanceof"}]," solution is that it doesn‚Äôt work when there are multiple copies of React on the page, and the component we‚Äôre checking inherits from ",["$","em",null,{"children":"another"}]," React copy‚Äôs ",["$","code",null,{"children":"React.Component"}],". Mixing multiple copies of React in a single project is bad for several reasons but historically we‚Äôve tried to avoid issues when possible. (With Hooks, we ",["$","$L8",null,{"href":"https://github.com/facebook/react/issues/13991","children":"might need to"}]," force deduplication though.)"]}],"\n",["$","p",null,{"children":["One other possible heuristic could be to check for presence of a ",["$","code",null,{"children":"render"}]," method on the prototype. However, at the time it ",["$","$L8",null,{"href":"https://github.com/facebook/react/issues/4599#issuecomment-129714112","children":"wasn‚Äôt clear"}]," how the component API would evolve. Every check has a cost so we wouldn‚Äôt want to add more than one. This would also not work if ",["$","code",null,{"children":"render"}]," was defined as an instance method, such as with the class property syntax."]}],"\n",["$","p",null,{"children":["So instead, React ",["$","$L8",null,{"href":"https://github.com/facebook/react/pull/4663","children":"added"}]," a special flag to the base component. React checks for the presence of that flag, and that‚Äôs how it knows whether something is a React component class or not."]}],"\n",["$","p",null,{"children":["Originally the flag was on the base ",["$","code",null,{"children":"React.Component"}]," class itself:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Inside React"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Component"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isReactClass "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{};"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// We can check it like this"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isReactClass"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ Yes"}]]}]]}]}]}],"\n",["$","p",null,{"children":["However, some class implementations we wanted to target ",["$","$L8",null,{"href":"https://github.com/scala-js/scala-js/issues/1900","children":"did not"}]," copy static properties (or set the non-standard ",["$","code",null,{"children":"__proto__"}],"), so the flag was getting lost."]}],"\n",["$","p",null,{"children":["This is why React ",["$","$L8",null,{"href":"https://github.com/facebook/react/pull/5021","children":"moved"}]," this flag to ",["$","code",null,{"children":"React.Component.prototype"}],":"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// Inside React"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Component"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"Component"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isReactComponent "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{};"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// We can check it like this"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Greeting"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prototype"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isReactComponent"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ‚úÖ Yes"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"And this is literally all there is to it."}]}],"\n",["$","p",null,{"children":["You might be wondering why it‚Äôs an object and not just a boolean. It doesn‚Äôt matter much in practice but early versions of Jest (before Jest was Good‚Ñ¢Ô∏è) had automocking turned on by default. The generated mocks omitted primitive properties, ",["$","$L8",null,{"href":"https://github.com/facebook/react/pull/4663#issuecomment-136533373","children":"breaking the check"}],". Thanks, Jest."]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"isReactComponent"}]," check is ",["$","$L8",null,{"href":"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300","children":"used in React"}]," to this day."]}],"\n",["$","p",null,{"children":["If you don‚Äôt extend ",["$","code",null,{"children":"React.Component"}],", React won‚Äôt find ",["$","code",null,{"children":"isReactComponent"}]," on the prototype, and won‚Äôt treat component as a class. Now you know why ",["$","$L8",null,{"href":"https://stackoverflow.com/a/42680526/458193","children":"the most upvoted answer"}]," for ",["$","code",null,{"children":"Cannot call a class as a function"}]," error is to add ",["$","code",null,{"children":"extends React.Component"}],". Finally, a ",["$","$L8",null,{"href":"https://github.com/facebook/react/pull/11168","children":"warning was added"}]," that warns when ",["$","code",null,{"children":"prototype.render"}]," exists but ",["$","code",null,{"children":"prototype.isReactComponent"}]," doesn‚Äôt."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["You might say this story is a bit of a bait-and-switch. ",["$","strong",null,{"children":["The actual solution is really simple, but I went on a huge tangent to explain ",["$","em",null,{"children":"why"}]," React ended up with this solution, and what the alternatives were."]}]]}],"\n",["$","p",null,{"children":"In my experience, that‚Äôs often the case with library APIs. For an API to be simple to use, you often need to consider the language semantics (possibly, for several languages, including future directions), runtime performance, ergonomics with and without compile-time steps, the state of the ecosystem and packaging solutions, early warnings, and many other things. The end result might not always be the most elegant, but it must be practical."}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["If the final API is successful, ",["$","em",null,{"children":"its users"}]," never have to think about this process."]}]," Instead they can focus on creating apps."]}],"\n",["$","p",null,{"children":"But if you‚Äôre also curious‚Ä¶ it‚Äôs nice to know how it works."}]]
