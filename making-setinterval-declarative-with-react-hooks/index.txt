1:HL["/_next/static/css/0f6647b39fdbcb3d.css","style",{"crossOrigin":""}]
0:["iWWiOWlg3tDiHen4DuUO-",[[["",{"children":[["slug","making-setinterval-declarative-with-react-hooks","d"],{"children":["__PAGE__?{\"slug\":\"making-setinterval-declarative-with-react-hooks\"}",{}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0f6647b39fdbcb3d.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/3c6c21fa7f32edf2.css","style",{"crossOrigin":""}]
5:HL["/_next/static/css/f9d4d708579596e8.css","style",{"crossOrigin":""}]
6:I[4982,["569","static/chunks/569-52e5d813bbfa85ea.js","185","static/chunks/app/layout-cfb37acb14684668.js"],""]
7:I[8256,["569","static/chunks/569-52e5d813bbfa85ea.js","64","static/chunks/app/%5Bslug%5D/layout-d3e08fbfdc858bf2.js"],""]
8:I[2008,["569","static/chunks/569-52e5d813bbfa85ea.js","42","static/chunks/app/%5Bslug%5D/page-798073576b23f3f1.js"],""]
9:I[6954,[],""]
a:I[7264,[],""]
2:[null,["$","$L6",null,{"children":["$","html",null,{"lang":"en","className":"__className_e34cb4","children":["$","body",null,{"className":"mx-auto max-w-2xl bg-[--bg] px-5 py-12 text-[--text]","children":[["$","header",null,{"className":"mb-14 flex flex-row place-content-between","children":[["$","$L7",null,{}],["$","span",null,{"className":"relative top-[4px] italic","children":["by"," ",["$","$L8",null,{"href":"https://danabra.mov","target":"_blank","children":["$","img",null,{"alt":"Dan Abramov","src":"https://github.com/gaearon.png","className":"relative -top-1 mx-1 inline h-8 w-8 rounded-full"}]}]]}]]}],["$","main",null,{"children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","article",null,{"className":"markdown","children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"Not found"}],["$","div",null,{"className":"markdown mt-10","children":[["$","p",null,{"children":"This page doesn't exist (yet?)"}],["$","p",null,{"children":["I recently rewrote the site so maybe something broke. Please"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/issues/796","children":"complain here."}]]}],["$","p",null,{"children":["If you're looking for translated posts, they're not on the site anymore but you can find"," ",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/tree/archive/src/pages","children":"an archive of them here."}]]}],["$","p",null,{"children":"Hope you'll find what you're looking for."}]]}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]],"childProp":{"current":[null,[["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children",["slug","making-setinterval-declarative-with-react-hooks","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb","$Lc",null],"segment":"__PAGE__?{\"slug\":\"making-setinterval-declarative-with-react-hooks\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f9d4d708579596e8.css","precedence":"next","crossOrigin":""}]]}],["$","footer",null,{"className":"mt-12","children":["$","$L7",null,{}]}]],null],"segment":["slug","making-setinterval-declarative-with-react-hooks","d"]},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3c6c21fa7f32edf2.css","precedence":"next","crossOrigin":""}]]}]}]]}]}]}],null]
c:["$","article",null,{"children":[["$","h1",null,{"className":"__className_b47211 text-[40px] font-black leading-[44px] text-[--title]","children":"Making setInterval Declarative with React Hooks"}],["$","p",null,{"className":"mt-2 text-[13px] text-gray-700 dark:text-gray-300","children":"February 4, 2019"}],["$","div",null,{"className":"markdown mt-10","children":["$Ld",["$","hr",null,{}],["$","p",null,{"children":[["$","$L8",null,{"href":"https://x.com/search?q=https%3A%2F%2Foverreacted.io%2Fmaking-setinterval-declarative-with-react-hooks%2F","children":"Discuss on ùïè"}],"¬†¬†¬∑¬†¬†",["$","$L8",null,{"href":"https://github.com/gaearon/overreacted.io/edit/main/public/making-setinterval-declarative-with-react-hooks/index.md","children":"Edit on GitHub"}]]}]]}]]}]
3:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Making setInterval Declarative with React Hooks ‚Äî overreacted"}],["$","meta","3",{"name":"description","content":"How I learned to stop worrying and love refs."}],["$","link","4",{"rel":"icon","href":"/icon.png?e0852c1e2c7f0e65","type":"image/png","sizes":"329x329"}]]
b:null
d:[["$","p",null,{"children":["If you played with ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-intro.html","children":"React Hooks"}]," for more than a few hours, you probably ran into an intriguing problem: using ",["$","code",null,{"children":"setInterval"}]," just ",["$","$L8",null,{"href":"https://stackoverflow.com/questions/53024496/state-not-updating-when-using-react-state-hook-within-setinterval","children":"doesn‚Äôt work"}]," as you‚Äôd expect."]}],"\n",["$","p",null,{"children":["In the ",["$","$L8",null,{"href":"https://mobile.twitter.com/ryanflorence/status/1088606583637061634","children":"words"}]," of Ryan Florence:"]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"I‚Äôve had a lot of people point to setInterval with hooks as some sort of egg on React‚Äôs face"}],"\n"]}],"\n",["$","p",null,{"children":["Honestly, I think these people have a point. It ",["$","em",null,{"children":"is"}]," confusing at first."]}],"\n",["$","p",null,{"children":["But I‚Äôve also come to see it not as a flaw of Hooks but as a mismatch between the ",["$","$L8",null,{"href":"/react-as-a-ui-runtime/","children":"React programming model"}]," and ",["$","code",null,{"children":"setInterval"}],". Hooks, being closer to the React programming model than classes, make that mismatch more prominent."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["There ",["$","em",null,{"children":"is"}]," a way to get them working together very well but it‚Äôs a bit unintuitive."]}]}],"\n",["$","p",null,{"children":["In this post, we‚Äôll look at ",["$","em",null,{"children":"how"}]," to make intervals and Hooks play well together, ",["$","em",null,{"children":"why"}]," this solution makes sense, and which ",["$","em",null,{"children":"new"}]," capabilities it can give you."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["Disclaimer: this post focuses on a ",["$","em",null,{"children":"pathological case"}],". Even if an API simplifies a hundred use cases, the discussion will always focus on the one that got harder."]}]}],"\n",["$","p",null,{"children":["If you‚Äôre new to Hooks and don‚Äôt understand what the fuss is about, check out ",["$","$L8",null,{"href":"https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889","children":"this introduction"}]," and the ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-intro.html","children":"documentation"}]," instead. This post assumes that you worked with Hooks for more than an hour."]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"Just Show Me the Code"}],"\n",["$","p",null,{"children":"Without further ado, here‚Äôs a counter that increments every second:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"import"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useRef "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"from"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"react"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Your custom logic here"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Here‚Äôs a ",["$","$L8",null,{"href":"https://codesandbox.io/s/105x531vkq","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","p",null,{"children":["This ",["$","code",null,{"children":"useInterval"}]," isn‚Äôt a built-in React Hook; it‚Äôs a ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-custom.html","children":"custom Hook"}]," that I wrote:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"import"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" useRef "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"from"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"react"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useRef"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Remember the latest callback."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"current "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Set up the interval."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"!=="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Here‚Äôs a ",["$","$L8",null,{"href":"https://codesandbox.io/s/105x531vkq","children":"CodeSandbox demo"}]," in case you missed it earlier.)"]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["My ",["$","code",null,{"children":"useInterval"}]," Hook sets up an interval and clears it after unmounting."]}]," It‚Äôs a combo of ",["$","code",null,{"children":"setInterval"}]," and ",["$","code",null,{"children":"clearInterval"}]," tied to the component lifecycle."]}],"\n",["$","p",null,{"children":"Feel free to copy paste it in your project or put it on npm."}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"If you don‚Äôt care how this works, you can stop reading now! The rest of the blog post is for folks who are ready to take a deep dive into React Hooks."}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"Wait What?! ü§î"}],"\n",["$","p",null,{"children":"I know what you‚Äôre thinking:"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"Dan, this code doesn‚Äôt make any sense. What happened to ‚ÄúJust JavaScript‚Äù? Admit that React has jumped the shark with Hooks!"}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"I thought this too but I changed my mind, and I‚Äôm going to change yours."}]," Before explaining why this code makes sense, I want to show off what it can do."]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":["Why ",["$","code",null,{"children":"useInterval()"}]," Is a Better API"]}],"\n",["$","p",null,{"children":["To remind you, my ",["$","code",null,{"children":"useInterval"}]," Hook accepts a function and a delay:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ..."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["This looks a lot like ",["$","code",null,{"children":"setInterval"}],":"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// ..."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["So why not just use ",["$","code",null,{"children":"setInterval"}]," directly?"]}]}],"\n",["$","p",null,{"children":["This may not be obvious at first, but the difference between the ",["$","code",null,{"children":"setInterval"}]," you know and my ",["$","code",null,{"children":"useInterval"}]," Hook is that ",["$","strong",null,{"children":"its arguments are ‚Äúdynamic‚Äù"}],"."]}],"\n",["$","p",null,{"children":"I‚Äôll illustrate this point with a concrete example."}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"Let‚Äôs say we want the interval delay to be adjustable:"}],"\n",["$","p",null,{"children":["$","img",null,{"src":"./counter_delay.gif","alt":"Counter with an input that adjusts the interval delay"}]}],"\n",["$","p",null,{"children":["While you wouldn‚Äôt necessarily control the delay with an ",["$","em",null,{"children":"input"}],", adjusting it dynamically can be useful ‚Äî for example, to poll for some AJAX updates less often while the user has switched to a different tab."]}],"\n",["$","p",null,{"children":["So how would you do this with ",["$","code",null,{"children":"setInterval"}]," in a class? I ended up with this:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Counter"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"extends"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"React"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Component "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  state "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"};"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"componentDidMount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"interval "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"componentDidUpdate"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"prevProps"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" prevState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"prevState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"!=="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"interval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"interval "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"componentWillUnmount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"interval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handleDelayChange"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Number"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"target"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"input"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" value={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"state"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} onChange={"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleDelayChange"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} />"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Here‚Äôs a ",["$","$L8",null,{"href":"https://codesandbox.io/s/mz20m600mp","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","p",null,{"children":"This is not too bad!"}],"\n",["$","p",null,{"children":"What‚Äôs the Hook version looking like?"}],"\n",["$","font",null,{"size":"50","children":"ü•Åü•Åü•Å"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Your custom logic here"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handleDelayChange"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Number"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"e"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"target"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"));"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"input"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" value={"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} onChange={"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleDelayChange"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"} />"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Here‚Äôs a ",["$","$L8",null,{"href":"https://codesandbox.io/s/329jy81rlm","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","p",null,{"children":["Yeah, ",["$","em",null,{"children":"that‚Äôs all it takes"}],"."]}],"\n",["$","p",null,{"children":["Unlike the class version, there is no complexity gap for ‚Äúupgrading‚Äù the ",["$","code",null,{"children":"useInterval"}]," Hook example to have a dynamically adjusted delay:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Constant delay"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Adjustable delay"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["When ",["$","code",null,{"children":"useInterval"}]," Hook sees a different delay, it sets up the interval again."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["Instead of writing code to ",["$","em",null,{"children":"set"}]," and ",["$","em",null,{"children":"clear"}]," the interval, I can ",["$","em",null,{"children":"declare"}]," an interval with a particular delay ‚Äî and our ",["$","code",null,{"children":"useInterval"}]," Hook makes it happen."]}]}],"\n",["$","p",null,{"children":["What if I want to temporarily ",["$","em",null,{"children":"pause"}]," my interval? I can do this with state too:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setIsRunning"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F87086"},"children":"true"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Here is a ",["$","$L8",null,{"href":"https://codesandbox.io/s/l240mp2pm7","children":"demo"}],"!)"]}]}],"\n",["$","p",null,{"children":["This is what gets me excited about Hooks and React all over again. We can wrap the existing imperative APIs and create declarative APIs expressing our intent more closely. Just like with rendering, we can ",["$","strong",null,{"children":"describe the process at all points in time simultaneously"}]," instead of carefully issuing commands to manipulate it."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":["I hope by this you‚Äôre sold on ",["$","code",null,{"children":"useInterval()"}]," Hook being a nicer API ‚Äî at least when we‚Äôre doing it from a component."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["But why is using ",["$","code",null,{"children":"setInterval()"}]," and ",["$","code",null,{"children":"clearInterval()"}]," annoying with Hooks?"]}]," Let‚Äôs go back to our counter example and try to implement it manually."]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"First Attempt"}],"\n",["$","p",null,{"children":"I‚Äôll start with a simple example that just renders the initial state:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["Now I want an interval that increments it every second. It‚Äôs a ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup","children":"side effect that needs cleanup"}]," so I‚Äôm going to ",["$","code",null,{"children":"useEffect()"}]," and return the cleanup function:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" => "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(See the ",["$","$L8",null,{"href":"https://codesandbox.io/s/7wlxk1k87j","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","p",null,{"children":"Seems easy enough? This kind of works."}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"However, this code has a strange behavior."}]}],"\n",["$","p",null,{"children":["React by default re-applies effects after every render. This is intentional and helps avoid ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update","children":"a whole class of bugs"}]," that are present in React class components."]}],"\n",["$","p",null,{"children":["This is usually good because many subscription APIs can happily remove the old and add a new listener at any time. However, ",["$","code",null,{"children":"setInterval"}]," isn‚Äôt one of them. When we run ",["$","code",null,{"children":"clearInterval"}]," and ",["$","code",null,{"children":"setInterval"}],", their timing shifts. If we re-render and re-apply effects too often, the interval never gets a chance to fire!"]}],"\n",["$","p",null,{"children":["We can see the bug by re-rendering our component within a ",["$","em",null,{"children":"smaller"}]," interval:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Re-renders and re-applies Counter's effects"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// which in turn causes it to clearInterval()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// and setInterval() before that interval fires."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"ReactDOM"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"render"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" />,"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" rootElement"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"100"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(See a ",["$","$L8",null,{"href":"https://codesandbox.io/s/9j86r218y4","children":"demo"}]," of this bug.)"]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"Second Attempt"}],"\n",["$","p",null,{"children":["You might know that ",["$","code",null,{"children":"useEffect()"}]," lets us ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects","children":["$","em",null,{"children":"opt out"}]}]," of re-applying effects. You can specify a dependency array as a second argument, and React will only re-run the effect if something in that array changes:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"document"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"title "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"`You clicked "}],["$","span",null,{"style":{"color":"#7986E7"},"children":"$${"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#7986E7"},"children":"}"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" times`"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}]]}]}]}],"\n",["$","p",null,{"children":["When we want to ",["$","em",null,{"children":"only"}]," run the effect on mount and cleanup on unmount, we can pass an empty ",["$","code",null,{"children":"[]"}]," array of dependencies."]}],"\n",["$","p",null,{"children":["However, this is a common source of mistakes if you‚Äôre not very familiar with JavaScript closures. We‚Äôre going to make this mistake right now! (We‚Äôve also built a ",["$","$L8",null,{"href":"https://www.npmjs.com/package/eslint-plugin-react-hooks","children":"lint rule"}]," to surface these bugs early.)"]}],"\n",["$","p",null,{"children":"In the first attempt, our problem was that re-running the effects caused our timer to get cleared too early. We can try to fix it by never re-running them:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" => "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"[]);"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["However, now our counter updates to 1 and stays there. (",["$","$L8",null,{"href":"https://codesandbox.io/s/jj0mk6y683","children":"See the bug in action"}],".)"]}],"\n",["$","p",null,{"children":"What happened?!"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["The problem is that ",["$","code",null,{"children":"useEffect"}]," captures the ",["$","code",null,{"children":"count"}]," from the first render."]}]," It is equal to ",["$","code",null,{"children":"0"}],". We never re-apply the effect so the closure in ",["$","code",null,{"children":"setInterval"}]," always references the ",["$","code",null,{"children":"count"}]," from the first render, and ",["$","code",null,{"children":"count + 1"}]," is always ",["$","code",null,{"children":"1"}],". Oops!"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"I can hear your teeth grinding. Hooks are so annoying, right?"}]}],"\n",["$","p",null,{"children":[["$","$L8",null,{"href":"https://codesandbox.io/s/j379jxrzjy","children":"One way"}]," to fix it is to replace ",["$","code",null,{"children":"setCount(count + 1)"}]," with the ‚Äúupdater‚Äù form like ",["$","code",null,{"children":"setCount(c => c + 1)"}],". It can always read fresh state for that variable. But this doesn‚Äôt help you read the fresh props, for example."]}],"\n",["$","p",null,{"children":[["$","$L8",null,{"href":"https://codesandbox.io/s/00o9o95jyv","children":"Another fix"}]," is to ",["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-reference.html#usereducer","children":["$","code",null,{"children":"useReducer()"}]}],". This approach gives you more flexibility. Inside the reducer, you have the access both to current state and fresh props. The ",["$","code",null,{"children":"dispatch"}]," function itself never changes so you can pump data into it from any closure. One limitation of ",["$","code",null,{"children":"useReducer()"}]," is that you can‚Äôt yet emit side effects in it. (However, you could return new state¬†‚Äî triggering some effect.)"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"But why is it getting so convoluted?"}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"The Impedance Mismatch"}],"\n",["$","p",null,{"children":["This term is sometimes thrown around, and ",["$","$L8",null,{"href":"https://haacked.com/archive/2004/06/15/impedance-mismatch.aspx/","children":"Phil Haack"}]," explains it like this:"]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"One might say Databases are from Mars and Objects are from Venus. Databases do not map naturally to object models. It‚Äôs a lot like trying to push the north poles of two magnets together."}],"\n"]}],"\n",["$","p",null,{"children":["Our ‚Äúimpedance mismatch‚Äù is not between Databases and Objects. It is between the React programming model and the imperative ",["$","code",null,{"children":"setInterval"}]," API."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["A React component may be mounted for a while and go through many different states, but its render result describes ",["$","em",null,{"children":"all of them at once."}]]}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Describes every render"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}]]}]}]}],"\n",["$","p",null,{"children":"Hooks let us apply the same declarative approach to effects:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Describes every interval state"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":["We don‚Äôt ",["$","em",null,{"children":"set"}]," the interval, but specify ",["$","em",null,{"children":"whether"}]," it is set and with what delay. Our Hook makes it happen. A continuous process is described in discrete terms."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["By contrast, ",["$","code",null,{"children":"setInterval"}]," does not describe a process in time ‚Äî once you set the interval, you can‚Äôt change anything about it except clearing it."]}]}],"\n",["$","p",null,{"children":["That‚Äôs the mismatch between the React model and the ",["$","code",null,{"children":"setInterval"}]," API."]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"Props and state of React components can change. React will re-render them and ‚Äúforget‚Äù everything about the previous render result. It becomes irrelevant."}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"useEffect()"}]," Hook ‚Äúforgets‚Äù the previous render too. It cleans up the last effect and sets up the next effect. The next effect closes over fresh props and state. This is why our ",["$","$L8",null,{"href":"https://codesandbox.io/s/7wlxk1k87j","children":"first attempt"}]," worked for simple cases."]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["But ",["$","code",null,{"children":"setInterval()"}]," does not ‚Äúforget‚Äù."]}]," It will forever reference the old props and state until you replace it ‚Äî which you can‚Äôt do without resetting the time."]}],"\n",["$","p",null,{"children":"Or wait, can you?"}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"Refs to the Rescue!"}],"\n",["$","p",null,{"children":"The problem boils down to this:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["We do ",["$","code",null,{"children":"setInterval(callback1, delay)"}]," with ",["$","code",null,{"children":"callback1"}]," from first render."]}],"\n",["$","li",null,{"children":["We have ",["$","code",null,{"children":"callback2"}]," from next render that closes over fresh props and state."]}],"\n",["$","li",null,{"children":"But we can‚Äôt replace an already existing interval without resetting the time!"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["So what if we didn‚Äôt replace the interval at all, and instead introduced a mutable ",["$","code",null,{"children":"savedCallback"}]," variable pointing to the ",["$","em",null,{"children":"latest"}]," interval callback?"]}]}],"\n",["$","p",null,{"children":"Now we can see the solution:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["We ",["$","code",null,{"children":"setInterval(fn, delay)"}]," where ",["$","code",null,{"children":"fn"}]," calls ",["$","code",null,{"children":"savedCallback"}],"."]}],"\n",["$","li",null,{"children":["Set ",["$","code",null,{"children":"savedCallback"}]," to ",["$","code",null,{"children":"callback1"}]," after the first render."]}],"\n",["$","li",null,{"children":["Set ",["$","code",null,{"children":"savedCallback"}]," to ",["$","code",null,{"children":"callback2"}]," after the next render."]}],"\n",["$","li",null,{"children":"???"}],"\n",["$","li",null,{"children":"PROFIT"}],"\n"]}],"\n",["$","p",null,{"children":["This mutable ",["$","code",null,{"children":"savedCallback"}]," needs to ‚Äúpersist‚Äù across the re-renders. So it can‚Äôt be a regular variable. We want something more like an instance field."]}],"\n",["$","p",null,{"children":[["$","$L8",null,{"href":"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables","children":"As we can learn from the Hooks FAQ,"}]," ",["$","code",null,{"children":"useRef()"}]," gives us exactly that:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useRef"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// { current: null }"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(You might be familiar with ",["$","$L8",null,{"href":"https://reactjs.org/docs/refs-and-the-dom.html","children":"DOM refs"}]," in React. Hooks use the same concept for holding any mutable values. A ref is like a ‚Äúbox‚Äù into which you can put anything.)"]}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"useRef()"}]," returns a plain object with a mutable ",["$","code",null,{"children":"current"}]," property that‚Äôs shared between renders. We can save the ",["$","em",null,{"children":"latest"}]," interval callback into it:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Can read fresh props, state, etc."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// After every render, save the latest callback into our ref."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"current "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}]]}]}]}],"\n",["$","p",null,{"children":"And then we can read and call it from inside our interval:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"[]);"}]]}]]}]}]}],"\n",["$","p",null,{"children":["Thanks to ",["$","code",null,{"children":"[]"}],", our effect never re-executes, and the interval doesn‚Äôt get reset. However, thanks to the ",["$","code",null,{"children":"savedCallback"}]," ref, we can always read the callback that we set after the last render, and call it from the interval tick."]}],"\n",["$","p",null,{"children":"Here‚Äôs a complete working solution:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useRef"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"current "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"[]);"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(See the ",["$","$L8",null,{"href":"https://codesandbox.io/s/3499qqr565","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"children":"Extracting a Hook"}],"\n",["$","p",null,{"children":"Admittedly, the above code can be disorienting. It‚Äôs mind-bending to mix the opposite paradigms. There‚Äôs also a potential to make a mess with mutable refs."}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"I think Hooks provide lower-level primitives than classes ‚Äî but their beauty is that they enable us to compose and create better declarative abstractions."}]}],"\n",["$","p",null,{"children":"Ideally, I just want to write this:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":"I‚Äôll copy and paste the body of my ref mechanism into a custom Hook:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useRef"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"current "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"[]);"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["Currently, the ",["$","code",null,{"children":"1000"}]," delay is hardcoded. I want to make it an argument:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}]}]}]}],"\n",["$","p",null,{"children":"I will use it when I set up the interval:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]}]}]}],"\n",["$","p",null,{"children":["Now that the ",["$","code",null,{"children":"delay"}]," can change between renders, I need to declare it in the dependencies of my interval effect:"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}]]}]}]}],"\n",["$","p",null,{"children":["Wait, didn‚Äôt we want to avoid resetting the interval effect, and specifically passed ",["$","code",null,{"children":"[]"}]," to avoid it? Not quite. We only wanted to avoid resetting it when the ",["$","em",null,{"children":"callback"}]," changes. But when the ",["$","code",null,{"children":"delay"}]," changes, we ",["$","em",null,{"children":"want"}]," to restart the timer!"]}],"\n",["$","p",null,{"children":"Let‚Äôs check if our code works:"}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useRef"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"current "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" callback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(Try it on ",["$","$L8",null,{"href":"https://codesandbox.io/s/xvyl15375w","children":"CodeSandbox"}],".)"]}]}],"\n",["$","p",null,{"children":["It does! We can now ",["$","code",null,{"children":"useInterval()"}]," in any component and not think too much about its implementation details."]}],"\n",["$","h2",null,{"children":"Bonus: Pausing the Interval"}],"\n",["$","p",null,{"children":["Say we want to be able to pause our interval by passing ",["$","code",null,{"children":"null"}]," as the ",["$","code",null,{"children":"delay"}],":"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setIsRunning"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F87086"},"children":"true"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}]]}]}]}],"\n",["$","p",null,{"children":"How do we implement this? The answer is: by not setting up an interval."}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useEffect"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"savedCallback"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"current"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"!=="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"null"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"let "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tick"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"clearInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]);"}]]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(See the ",["$","$L8",null,{"href":"https://codesandbox.io/s/l240mp2pm7","children":"CodeSandbox demo"}],".)"]}]}],"\n",["$","p",null,{"children":["That‚Äôs it. This code handles all possible transitions: a change of a delay, pausing, or resuming an interval. The ",["$","code",null,{"children":"useEffect()"}]," API asks us to spend more upfront effort to describe the setup and cleanup ‚Äî but adding new cases is easy."]}],"\n",["$","h2",null,{"children":"Bonus: Fun Demo"}],"\n",["$","p",null,{"children":["This ",["$","code",null,{"children":"useInterval()"}]," Hook is really fun to play with. When the side effects are declarative, it‚Äôs much easier to orchestrate complex behaviors together."]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":["For example, we can have a ",["$","code",null,{"children":"delay"}]," of one interval be controlled by another:"]}]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"./counter_inception.gif","alt":"Counter that automatically speeds up"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"jsx","data-theme":"default","children":["$","code",null,{"data-language":"jsx","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Counter"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const ["}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"setCount"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"] "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useState"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"0"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Increment the counter."}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setCount"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"+"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// Make it faster every second!"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"useInterval"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"10"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"/"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"2"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","data-highlighted-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"},"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handleReset"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"setDelay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#F78C6C"},"children":"1000"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Counter: "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"count"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h1"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h4"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"Delay: "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"delay"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"h4"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"<"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"button"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" onClick={"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleReset"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}>"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#CED2D6"},"children":"        Reset delay"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"button"}],["$","span",null,{"style":{"color":"#C792EA"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"</>"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["(See the ",["$","$L8",null,{"href":"https://codesandbox.io/s/znr418qp13","children":"CodeSandbox demo"}],"!)"]}]}],"\n",["$","h2",null,{"children":"Closing Thoughts"}],"\n",["$","p",null,{"children":["Hooks take some getting used to ‚Äî and ",["$","em",null,{"children":"especially"}]," at the boundary of imperative and declarative code. You can create powerful declarative abstractions with them like ",["$","$L8",null,{"href":"https://www.react-spring.io/docs/hooks/basics","children":"React Spring"}]," but they can definitely get on your nerves sometimes."]}],"\n",["$","p",null,{"children":"This is an early time for Hooks, and there are definitely still patterns we need to work out and compare. Don‚Äôt rush to adopt Hooks if you‚Äôre used to following well-known ‚Äúbest practices‚Äù. There‚Äôs still a lot to try and discover."}],"\n",["$","p",null,{"children":["I hope this post helps you understand the common pitfalls related to using APIs like ",["$","code",null,{"children":"setInterval()"}]," with Hooks, the patterns that can help you overcome them, and the sweet fruit of creating more expressive declarative APIs on top of them."]}]]
